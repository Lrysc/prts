# 官方兼容格式导出功能说明

## 问题描述
用户反馈将导出的记录导入到其他网站时出现HTTP 500错误，错误时间：1764405857563。

## 问题分析
其他网站期望的是明日方舟官方的原始数据格式，而我们之前只提供了内部格式和带RSA签名的通用格式。

## 解决方案
新增"官方兼容格式"导出选项，生成与官方完全一致的数据格式。

## 新增功能

### 导出格式选项
现在支持三种导出格式：
1. **原始格式** - PRTS内部格式
2. **通用格式** - 带RSA签名的标准格式
3. **官方兼容格式** - 与官方API返回格式完全一致

### 官方兼容格式特点

#### 文件命名
格式：`时间戳_official_UID前8位_gacha.json`
示例：`1764351379886_official_19371587_gacha.json`

#### 数据结构
```json
{
  "时间戳.毫秒": {
    "p": "卡池名称",
    "pi": "卡池ID", 
    "c": [["角色名", 星级, 新品标记], ...],
    "cn": "卡池中文名\\n副标题",
    "ci": "卡池ID",
    "pos": 位置
  },
  ...
}
```

#### 字段说明
- `p`: 卡池名称（不含换行符）
- `pi`: 卡池ID
- `c`: 角色数组，每个元素为`[角色名, 星级, 新品标记]`
- `cn`: 卡池中文名（保持原始换行符）
- `ci`: 卡池ID
- `pos`: 记录位置

## 使用方法
1. 点击"导出记录"按钮
2. 在格式选择下拉菜单中选择"官方兼容格式"
3. 点击导出，生成的文件可直接导入其他方舟寻访记录网站

## 兼容性
- 完全兼容明日方舟官方API数据格式
- 可导入到支持官方格式的第三方网站
- 保持与原始数据100%一致的结构