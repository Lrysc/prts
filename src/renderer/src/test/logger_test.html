<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥å¿—å¯¼å‡ºåŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .log-output {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ZOOTå¤‡ç”¨ç³»ç»Ÿ - æ—¥å¿—å¯¼å‡ºåŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>æµ‹è¯•æ—¥å¿—è®°å½•</h3>
            <button onclick="testLogRecording()">æ·»åŠ æµ‹è¯•æ—¥å¿—</button>
            <button onclick="clearTestLogs()">æ¸…é™¤æµ‹è¯•æ—¥å¿—</button>
            <div id="logStatus"></div>
        </div>

        <div class="test-section">
            <h3>æ—¥å¿—å¯¼å‡ºæµ‹è¯•</h3>
            <button onclick="testLogExport()">å¯¼å‡ºæ—¥å¿—æ–‡æœ¬</button>
            <button onclick="testJsonExport()">å¯¼å‡ºJSONæ ¼å¼</button>
            <button onclick="downloadLog()">ä¸‹è½½æ—¥å¿—æ–‡ä»¶</button>
            <div id="exportStatus"></div>
        </div>

        <div class="test-section">
            <h3>æ—¥å¿—ç»Ÿè®¡</h3>
            <button onclick="showLogStats()">æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯</button>
            <div id="logStats"></div>
        </div>

        <div class="test-section">
            <h3>å¯¼å‡ºç»“æœé¢„è§ˆ</h3>
            <div class="log-output" id="logPreview">ç‚¹å‡»"å¯¼å‡ºæ—¥å¿—æ–‡æœ¬"æŸ¥çœ‹ç»“æœ...</div>
        </div>
    </div>

    <script type="module">
        // æ¨¡æ‹ŸloggeræœåŠ¡ï¼ˆç®€åŒ–ç‰ˆæœ¬ç”¨äºæµ‹è¯•ï¼‰
        const LogLevel = {
            DEBUG: 'DEBUG',
            INFO: 'INFO',
            WARN: 'WARN',
            ERROR: 'ERROR'
        };

        class MockLogger {
            constructor() {
                this.logs = [];
                this.APP_INFO = {
                    name: 'ZOOTå¤‡ç”¨ç³»ç»Ÿ',
                    version: '0.3.1'
                };
            }

            addLog(level, message, context) {
                const entry = {
                    timestamp: new Date().toISOString(),
                    level,
                    message,
                    context: context ? this.safeStringify(context) : undefined
                };
                this.logs.push(entry);
            }

            safeStringify(context) {
                try {
                    return JSON.parse(JSON.stringify(context));
                } catch {
                    return '[Unserializable Context Data]';
                }
            }

            info(message, context) {
                this.addLog(LogLevel.INFO, message, context);
            }

            warn(message, context) {
                this.addLog(LogLevel.WARN, message, context);
            }

            error(message, context) {
                this.addLog(LogLevel.ERROR, message, context);
            }

            gacha(message, context) {
                this.addLog(LogLevel.INFO, `[å¯»è®¿è®°å½•] ${message}`, context);
            }

            getLogs() {
                return [...this.logs];
            }

            getLogStats() {
                const byLevel = {
                    [LogLevel.DEBUG]: 0,
                    [LogLevel.INFO]: 0,
                    [LogLevel.WARN]: 0,
                    [LogLevel.ERROR]: 0
                };

                this.logs.forEach(entry => {
                    byLevel[entry.level]++;
                });

                return {
                    total: this.logs.length,
                    byLevel
                };
            }

            getEnvironmentInfo() {
                const ua = navigator.userAgent;
                let environment = 'æœªçŸ¥ç¯å¢ƒ';
                
                if (ua.includes('Windows')) environment = 'Windows';
                else if (ua.includes('Mac')) environment = 'macOS';
                else if (ua.includes('Linux')) environment = 'Linux';
                
                if (ua.includes('Chrome') && !ua.includes('Edg')) environment += ' - Chrome';
                else if (ua.includes('Firefox')) environment += ' - Firefox';
                else if (ua.includes('Edg')) environment += ' - Edge';
                
                return environment;
            }

            padString(str, length) {
                return (str + ' '.repeat(length)).substring(0, length);
            }

            getLevelIcon(level) {
                const icons = {
                    [LogLevel.DEBUG]: 'ğŸ”',
                    [LogLevel.INFO]: 'â„¹ï¸',
                    [LogLevel.WARN]: 'âš ï¸',
                    [LogLevel.ERROR]: 'âŒ'
                };
                return icons[level] || 'ğŸ“';
            }

            getModuleUsageStats() {
                const moduleStats = {
                    'ç”¨æˆ·è®¤è¯': 0,
                    'å¯»è®¿è®°å½•': 0,
                    'æ•°æ®å¯¼å…¥': 0,
                    'æ•°æ®å¯¼å‡º': 0,
                    'æ¸¸æˆæ•°æ®': 0,
                    'å…¬å¼€æ‹›å‹Ÿ': 0,
                    'ææ–™è§„åˆ’': 0,
                    'ç³»ç»Ÿæ“ä½œ': 0
                };

                this.logs.forEach(entry => {
                    const message = entry.message.toLowerCase();
                    
                    if (message.includes('ç™»å½•') || message.includes('è®¤è¯') || message.includes('auth')) {
                        moduleStats['ç”¨æˆ·è®¤è¯']++;
                    } else if (message.includes('å¯»è®¿') || message.includes('æŠ½å¡') || message.includes('gacha')) {
                        moduleStats['å¯»è®¿è®°å½•']++;
                    } else if (message.includes('å¯¼å…¥') || message.includes('import')) {
                        moduleStats['æ•°æ®å¯¼å…¥']++;
                    } else if (message.includes('å¯¼å‡º') || message.includes('export')) {
                        moduleStats['æ•°æ®å¯¼å‡º']++;
                    }
                });

                // ç§»é™¤ä½¿ç”¨æ¬¡æ•°ä¸º0çš„æ¨¡å—
                Object.keys(moduleStats).forEach(key => {
                    if (moduleStats[key] === 0) {
                        delete moduleStats[key];
                    }
                });

                return moduleStats;
            }

            getRecentErrors(count = 5) {
                const errorLogs = this.logs.filter(entry => entry.level === LogLevel.ERROR);
                return errorLogs.slice(-count);
            }

            exportLogs() {
                const meta = {
                    app: this.APP_INFO.name,
                    version: this.APP_INFO.version,
                    exportTime: new Date().toLocaleString('zh-CN'),
                    userAgent: navigator.userAgent,
                    platform: this.getEnvironmentInfo(),
                    logCount: this.logs.length
                };

                let logText = 'â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n';
                logText += 'â•‘                    ZOOTå¤‡ç”¨ç³»ç»Ÿ - åº”ç”¨æ—¥å¿—                    â•‘\n';
                logText += 'â•‘                  æ˜æ—¥æ–¹èˆŸå¯»è®¿è®°å½•ç®¡ç†å·¥å…·                      â•‘\n';
                logText += 'â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n';

                // å…ƒä¿¡æ¯éƒ¨åˆ†
                logText += '\nã€ç³»ç»Ÿä¿¡æ¯ã€‘\n';
                logText += 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n';
                logText += `â”‚ åº”ç”¨åç§°: ${this.padString(meta.app, 49)} â”‚\n`;
                logText += `â”‚ ç‰ˆæœ¬å·:   ${this.padString(meta.version, 49)} â”‚\n`;
                logText += `â”‚ å¯¼å‡ºæ—¶é—´: ${this.padString(meta.exportTime, 49)} â”‚\n`;
                logText += `â”‚ è¿è¡Œç¯å¢ƒ: ${this.padString(this.getEnvironmentInfo(), 49)} â”‚\n`;
                logText += 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n';

                // é¡¹ç›®åŠŸèƒ½æ¦‚è§ˆ
                logText += '\nã€é¡¹ç›®åŠŸèƒ½æ¦‚è§ˆã€‘\n';
                logText += 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n';
                logText += 'â”‚ ğŸ¯ æ ¸å¿ƒåŠŸèƒ½:                                           â”‚\n';
                logText += 'â”‚ â€¢ æ£®ç©ºå²›è´¦å·ç™»å½•ä¸è®¤è¯ç®¡ç†                              â”‚\n';
                logText += 'â”‚ â€¢ å¯»è®¿è®°å½•è·å–ä¸æ•°æ®å±•ç¤º                                â”‚\n';
                logText += 'â”‚ â€¢ å¤šæ ¼å¼æ•°æ®å¯¼å…¥å¯¼å‡º (åŸå§‹æ ¼å¼/é€šç”¨æ ¼å¼)                 â”‚\n';
                logText += 'â”‚ â€¢ è´¦å·æ•°æ®åˆå¹¶å¯¼å‡ºåŠŸèƒ½                                  â”‚\n';
                logText += 'â”‚ â€¢ å¹²å‘˜å…»æˆæ•°æ®æŸ¥è¯¢                                      â”‚\n';
                logText += 'â”‚ â€¢ å…¬å¼€æ‹›å‹Ÿè®¡ç®—å·¥å…·                                      â”‚\n';
                logText += 'â”‚ â€¢ ææ–™éœ€æ±‚è§„åˆ’ç³»ç»Ÿ                                      â”‚\n';
                logText += 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n';

                // æ—¥å¿—ç»Ÿè®¡
                const stats = this.getLogStats();
                logText += '\nã€æ—¥å¿—ç»Ÿè®¡ã€‘\n';
                logText += 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n';
                logText += `â”‚ æ€»æ¡æ•°:   ${this.padString(stats.total.toString(), 47)} â”‚\n`;
                logText += `â”‚ è°ƒè¯•æ—¥å¿—: ${this.padString(stats.byLevel[LogLevel.DEBUG].toString(), 47)} â”‚\n`;
                logText += `â”‚ ä¿¡æ¯æ—¥å¿—: ${this.padString(stats.byLevel[LogLevel.INFO].toString(), 47)} â”‚\n`;
                logText += `â”‚ è­¦å‘Šæ—¥å¿—: ${this.padString(stats.byLevel[LogLevel.WARN].toString(), 47)} â”‚\n`;
                logText += `â”‚ é”™è¯¯æ—¥å¿—: ${this.padString(stats.byLevel[LogLevel.ERROR].toString(), 47)} â”‚\n`;
                
                const errorRate = stats.total > 0 ? ((stats.byLevel[LogLevel.ERROR] / stats.total) * 100).toFixed(2) : '0.00';
                logText += `â”‚ é”™è¯¯ç‡:   ${this.padString(errorRate + '%', 47)} â”‚\n`;
                logText += 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n';

                // åŠŸèƒ½æ¨¡å—ä½¿ç”¨ç»Ÿè®¡
                const moduleStats = this.getModuleUsageStats();
                if (Object.keys(moduleStats).length > 0) {
                    logText += '\nã€åŠŸèƒ½æ¨¡å—ä½¿ç”¨ç»Ÿè®¡ã€‘\n';
                    logText += 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n';
                    for (const [module, count] of Object.entries(moduleStats)) {
                        logText += `â”‚ ${this.padString(module, 24)}: ${this.padString(count.toString(), 22)} â”‚\n`;
                    }
                    logText += 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n';
                }

                // æœ€è¿‘é”™è¯¯æ‘˜è¦
                const recentErrors = this.getRecentErrors(5);
                if (recentErrors.length > 0) {
                    logText += '\nã€æœ€è¿‘é”™è¯¯æ‘˜è¦ã€‘\n';
                    logText += 'â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n';
                    recentErrors.forEach((error, index) => {
                        const time = new Date(error.timestamp).toLocaleString('zh-CN');
                        const truncatedMsg = error.message.length > 35 ? error.message.substring(0, 35) + '...' : error.message;
                        logText += `â”‚ ${index + 1}. [${time}] ${this.padString(truncatedMsg, 45 - time.length - 5)} â”‚\n`;
                    });
                    logText += 'â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n';
                }

                logText += '\n' + 'â•'.repeat(65) + '\n';
                logText += 'ã€è¯¦ç»†æ—¥å¿—è®°å½•ã€‘\n';
                logText += 'â•'.repeat(65) + '\n\n';

                // è¯¦ç»†æ—¥å¿—å†…å®¹
                this.logs.forEach((entry, index) => {
                    const localTime = new Date(entry.timestamp).toLocaleString('zh-CN');
                    const levelIcon = this.getLevelIcon(entry.level);
                    
                    logText += `${levelIcon} [${index + 1}] [${localTime}] [${entry.level}] ${entry.message}\n`;

                    if (entry.context && Object.keys(entry.context).length > 0) {
                        logText += '   ğŸ“‹ ä¸Šä¸‹æ–‡ä¿¡æ¯:\n';
                        try {
                            const contextStr = JSON.stringify(entry.context, null, 2);
                            logText += '   ' + contextStr.split('\n').map(line => line || '   ').join('\n').replace(/   /g, '   â”‚ ');
                        } catch {
                            logText += '   â”‚ [æ— æ³•åºåˆ—åŒ–çš„ä¸Šä¸‹æ–‡æ•°æ®]\n';
                        }
                        logText += '\n';
                    }

                    logText += '   ' + 'â”€'.repeat(60) + '\n\n';
                });

                // é¡µè„šä¿¡æ¯
                logText += '\n' + 'â•'.repeat(65) + '\n';
                logText += 'ã€å¯¼å‡ºè¯´æ˜ã€‘\n';
                logText += 'â€¢ æœ¬æ—¥å¿—æ–‡ä»¶ç”± ZOOTå¤‡ç”¨ç³»ç»Ÿ è‡ªåŠ¨ç”Ÿæˆ\n';
                logText += 'â€¢ åŒ…å«ç³»ç»Ÿè¿è¡ŒæœŸé—´çš„æ‰€æœ‰é‡è¦æ“ä½œè®°å½•\n';
                logText += 'â€¢ å¦‚éœ€æŠ€æœ¯æ”¯æŒï¼Œè¯·æä¾›æ­¤æ—¥å¿—æ–‡ä»¶\n';
                logText += 'â€¢ é¡¹ç›®åœ°å€: https://github.com/Lrysc/prts\n';
                logText += 'â•'.repeat(65) + '\n';

                return logText;
            }

            clearLogs() {
                this.logs = [];
            }
        }

        // åˆ›å»ºå…¨å±€loggerå®ä¾‹
        const logger = new MockLogger();

        // å¯¼å‡ºå‡½æ•°åˆ°å…¨å±€ä½œç”¨åŸŸ
        window.testLogRecording = function() {
            logger.info('ç”¨æˆ·ç™»å½•æˆåŠŸ', { user: 'åšå£«', uid: '10001', level: 120 });
            logger.gacha('å¯»è®¿è®°å½•å¯¼å‡ºå®Œæˆ', { count: 156, format: 'official', time: '2.3s' });
            logger.warn('ç½‘ç»œè¿æ¥ä¸ç¨³å®š', { url: '/api/gacha', retry: 3 });
            logger.error('æ•°æ®è§£æå¤±è´¥', { error: 'Invalid JSON format', data: 'gacha_data' });
            logger.info('åˆå¹¶å¯¼å‡ºåŠŸèƒ½ä½¿ç”¨', { accounts: 2, format: 'universal', size: '1.2MB' });
            
            document.getElementById('logStatus').innerHTML = '<span class="success">âœ“ æµ‹è¯•æ—¥å¿—å·²æ·»åŠ </span>';
        };

        window.clearTestLogs = function() {
            logger.clearLogs();
            document.getElementById('logStatus').innerHTML = '<span class="info">æ—¥å¿—å·²æ¸…é™¤</span>';
            document.getElementById('logPreview').textContent = 'ç‚¹å‡»"å¯¼å‡ºæ—¥å¿—æ–‡æœ¬"æŸ¥çœ‹ç»“æœ...';
        };

        window.testLogExport = function() {
            try {
                const exportedLogs = logger.exportLogs();
                document.getElementById('logPreview').textContent = exportedLogs;
                document.getElementById('exportStatus').innerHTML = '<span class="success">âœ“ æ—¥å¿—å¯¼å‡ºæˆåŠŸ</span>';
            } catch (error) {
                document.getElementById('exportStatus').innerHTML = `<span class="error">âœ— å¯¼å‡ºå¤±è´¥: ${error.message}</span>`;
            }
        };

        window.testJsonExport = function() {
            try {
                const jsonData = {
                    meta: {
                        app: logger.APP_INFO.name,
                        version: logger.APP_INFO.version,
                        exportTime: new Date().toLocaleString('zh-CN'),
                        logCount: logger.logs.length
                    },
                    logs: logger.getLogs()
                };
                
                const jsonString = JSON.stringify(jsonData, null, 2);
                document.getElementById('logPreview').textContent = jsonString;
                document.getElementById('exportStatus').innerHTML = '<span class="success">âœ“ JSONå¯¼å‡ºæˆåŠŸ</span>';
            } catch (error) {
                document.getElementById('exportStatus').innerHTML = `<span class="error">âœ— JSONå¯¼å‡ºå¤±è´¥: ${error.message}</span>`;
            }
        };

        window.downloadLog = function() {
            try {
                const exportedLogs = logger.exportLogs();
                const blob = new Blob([exportedLogs], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `zoot_log_${new Date().toISOString().slice(0, 19).replace(/:/g, '-')}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                document.getElementById('exportStatus').innerHTML = '<span class="success">âœ“ æ—¥å¿—æ–‡ä»¶å·²ä¸‹è½½</span>';
            } catch (error) {
                document.getElementById('exportStatus').innerHTML = `<span class="error">âœ— ä¸‹è½½å¤±è´¥: ${error.message}</span>`;
            }
        };

        window.showLogStats = function() {
            const stats = logger.getLogStats();
            const moduleStats = logger.getModuleUsageStats();
            
            let statsHtml = '<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">';
            statsHtml += `<div><strong>æ€»æ—¥å¿—æ•°:</strong> ${stats.total}</div>`;
            statsHtml += `<div><strong>è°ƒè¯•:</strong> ${stats.byLevel[LogLevel.DEBUG]}</div>`;
            statsHtml += `<div><strong>ä¿¡æ¯:</strong> ${stats.byLevel[LogLevel.INFO]}</div>`;
            statsHtml += `<div><strong>è­¦å‘Š:</strong> ${stats.byLevel[LogLevel.WARN]}</div>`;
            statsHtml += `<div><strong>é”™è¯¯:</strong> ${stats.byLevel[LogLevel.ERROR]}</div>`;
            
            if (Object.keys(moduleStats).length > 0) {
                statsHtml += '</div><h4>åŠŸèƒ½æ¨¡å—ä½¿ç”¨ç»Ÿè®¡:</h4><ul>';
                for (const [module, count] of Object.entries(moduleStats)) {
                    statsHtml += `<li>${module}: ${count} æ¬¡</li>`;
                }
                statsHtml += '</ul>';
            }
            
            document.getElementById('logStats').innerHTML = statsHtml;
        };

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ·»åŠ ä¸€äº›ç¤ºä¾‹æ—¥å¿—
        window.addEventListener('load', function() {
            window.testLogRecording();
            window.showLogStats();
        });
    </script>
</body>
</html>